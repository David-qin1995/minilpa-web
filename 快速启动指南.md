# MiniLPA Web 快速启动指南

## 🚀 5 分钟快速部署

### 前置条件
- ✅ CentOS 7 服务器
- ✅ 已安装宝塔面板
- ✅ 服务器可访问互联网

### 一键部署

```bash
# 1. 上传代码到服务器
cd /www/wwwroot/

# 2. 进入项目目录
cd minilpa-web

# 3. 运行部署脚本
chmod +x deploy.sh
./deploy.sh

# 4. 等待部署完成（约 3-5 分钟）
```

### 配置 Nginx（在宝塔面板）

1. **添加网站**
   - 域名：`esim.haoyiseo.com`
   - PHP：纯静态

2. **修改配置**
   - 复制 `nginx.conf` 内容
   - 粘贴到网站配置文件
   - 保存并重载

3. **配置 SSL（可选）**
   - SSL → Let's Encrypt
   - 申请证书
   - 强制 HTTPS

### 开放端口

在宝塔面板「安全」中添加：
- 80 (HTTP)
- 443 (HTTPS)
- 3001 (API)
- 8080 (静态文件)

### 访问应用

打开浏览器访问：`http://esim.haoyiseo.com`

---

## 📦 项目结构

```
minilpa-web/
├── src/           # 前端代码（Vue 3）
├── server/        # 后端代码（Node.js）
├── Dockerfile     # Docker 配置
├── deploy.sh      # 部署脚本
├── nginx.conf     # Nginx 配置
└── README.md      # 详细文档
```

---

## 🛠️ 常用命令

### Docker 管理

```bash
# 查看容器状态
docker ps

# 查看日志
docker logs -f minilpa-web

# 重启容器
docker restart minilpa-web

# 停止容器
docker stop minilpa-web

# 删除容器
docker rm minilpa-web
```

### 应用管理

```bash
# 查看健康状态
curl http://localhost:3001/api/health

# 查看前端
curl http://localhost:8080

# 重新部署
./deploy.sh
```

### 日志查看

```bash
# 容器日志
docker logs -f minilpa-web

# Nginx 日志
tail -f /www/wwwlogs/esim.haoyiseo.com.log
```

---

## 🔧 故障排查

### 问题：无法访问网站

**解决方案：**

```bash
# 1. 检查容器是否运行
docker ps | grep minilpa-web

# 2. 检查端口
netstat -tlnp | grep -E '3001|8080'

# 3. 检查防火墙
firewall-cmd --list-ports

# 4. 重启服务
docker restart minilpa-web
```

### 问题：API 请求失败

**解决方案：**

```bash
# 测试后端
curl http://localhost:3001/api/health

# 查看日志
docker logs minilpa-web
```

### 问题：部署失败

**解决方案：**

```bash
# 清理并重新部署
docker stop minilpa-web
docker rm minilpa-web
docker rmi minilpa-web:latest
./deploy.sh
```

---

## 📝 功能说明

### ✨ 主要功能

- **配置文件管理**
  - 下载 eSIM 配置
  - 启用/禁用配置
  - 删除配置
  - 查看详情

- **通知管理**
  - 查看通知列表
  - 处理通知
  - 删除通知

- **芯片信息**
  - 查看 EID
  - 查看制造商信息
  - 查看证书

- **设置**
  - 主题切换（浅色/深色）
  - 语言切换（中/英/日）
  - 行为设置

### 🎨 界面特性

- 响应式设计
- 深色模式
- 多语言支持
- 拖拽上传
- 搜索功能

---

## 🔐 安全建议

1. **启用 HTTPS**
   - 使用 Let's Encrypt 免费证书
   - 强制 HTTPS 跳转

2. **防火墙配置**
   - 只开放必要端口
   - 使用宝塔安全插件

3. **定期备份**
   - 备份项目文件
   - 备份数据目录

4. **更新维护**
   - 定期更新系统
   - 定期更新应用

---

## 📚 更多文档

- **详细部署指南**：`宝塔部署指南.md`
- **完整文档**：`README.md`
- **API 文档**：见 `README.md` 中的 API 接口部分

---

## 💡 技术支持

遇到问题？

1. 查看日志文件
2. 检查配置是否正确
3. 参考详细文档
4. 联系技术支持

---

**部署成功！开始使用 MiniLPA Web 吧！** 🎉

